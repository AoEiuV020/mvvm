# IM SDK 概述

## 简介

IM SDK 是独立的即时通讯核心模块，提供与 UI 无关的所有功能实现。各 UI 框架项目通过 SDK 接口调用核心功能。

---

## 使用规范

**依赖注入优先**
- ViewModel 通过构造函数接收 SDK 接口
- 禁止在 ViewModel 内部直接创建 SDK 实例
- 禁止使用全局单例或静态方法访问 SDK

**优点：**
- 便于单元测试 mock
- 解耦 ViewModel 与 SDK 具体实现

具体框架的依赖注入方案见对应框架文档。

---

## 模块划分

| 模块 | 接口 | 说明 |
|------|------|------|
| [认证模块](认证模块.md) | `IAuthService` | 登录、注册、登出、Token 管理 |
| [用户模块](用户模块.md) | `IUserService` | 用户信息、资料更新 |
| [会话模块](会话模块.md) | `IConversationService` | 会话列表、创建/删除会话 |
| [消息模块](消息模块.md) | `IMessageService` | 发送/接收消息、消息历史 |
| [联系人模块](联系人模块.md) | `IContactService` | 好友管理、好友申请 |

---

## SDK 初始化

```dart
abstract class IMSDK {
  Future<void> init(SDKConfig config);
  
  IAuthService get authService;
  IUserService get userService;
  IConversationService get conversationService;
  IMessageService get messageService;
  IContactService get contactService;
  
  Future<void> destroy();
}

class SDKConfig {
  final String appId;
  final String serverUrl;
}
```

---

## 通用数据类型

```dart
class User {
  final String id;
  final String username;
  final String nickname;
  final String avatar;
  final UserStatus status;
}

enum UserStatus { online, offline, busy, away }
```
