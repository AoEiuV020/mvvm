# 跨页面状态共享

## 原则

多个页面依赖同一份数据时，共用同一个 ViewModel 实例。

## 适用场景

- 群聊页、群设置页、群管理页共享 GroupInfo
- 会话详情页、消息列表页共享 ConversationInfo
- 需要实时同步 SDK 推送的数据

## 核心逻辑

1. ViewModel 以唯一标识（如 groupId）为 key
2. 相同 key 返回同一 ViewModel 实例
3. ViewModel 内部监听 SDK 实时推送
4. 状态变更时，所有使用该 ViewModel 的页面自动刷新

## 生命周期管理

- 第一个页面使用时创建
- 最后一个页面离开后销毁（或根据业务需要保持）
- 销毁时取消订阅、释放资源

## 具体实现

各框架实现方式参见对应框架文档。
