# 测试规范

## 测试层次

| 层级 | 测试类型 | 测试内容 |
|------|----------|----------|
| Model | 单元测试 | 业务逻辑、数据验证、工具类 |
| ViewModel | 单元测试 | 状态变更、业务流程、异常处理 |
| View | Widget 测试 | UI 渲染、用户交互、状态绑定 |
| 集成 | 集成测试 | 完整业务流程 |

## Mock 策略

- ViewModel 测试：Mock SDK Service 接口
- View 测试：Mock ViewModel 或使用真实 ViewModel + Mock SDK
- 使用依赖注入便于替换 Mock 实现

## 测试命名

- 测试文件：`xxx_test.dart`（对应 `xxx.dart`）
- 测试组：使用描述性名称（如"登录ViewModel"）
- 测试用例：描述预期行为（如"登录成功返回true"）

## 覆盖率要求

- Model 层：核心业务逻辑 100%
- ViewModel：关键状态变更和异常路径
- View：关键交互和边界状态

## 禁止行为

- 测试依赖真实网络请求
- 测试依赖真实数据库
- 测试用例之间存在依赖
