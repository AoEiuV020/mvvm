# 多模块结构约束

## SDK 模块（按技术职责拆分）

| 模块 | 职责 | 依赖 |
|------|------|------|
| `sdk-api` | 公共接口定义、数据模型 | 无 |
| `sdk-tcp` | TCP 长连接管理 | sdk-api |
| `sdk-http` | HTTP 请求 | sdk-api |
| `sdk-db` | 本地数据库 | sdk-api |
| `sdk` | 聚合模块，统一入口 | 以上所有 |

```
sdk → sdk-tcp, sdk-http, sdk-db → sdk-api
```

## SDKUI 模块（按业务拆分）

| 模块 | 职责 | 依赖 |
|------|------|------|
| `sdkui` | 基础 UI SDK（登录、会话、聊天） | sdk-api |
| `sdkui-group` | 群组功能 UI | sdk-api, sdkui |
| `sdkui-enterprise` | 企业功能 UI | sdk-api, sdkui |

```
sdkui-group, sdkui-enterprise → sdkui → sdk-api
```

## 其他模块

| 模块 | 职责 | 依赖 |
|------|------|------|
| `uikit` | 纯 UI 组件库（无业务） | 无业务依赖 |
| `app` | 应用入口 | sdk, sdkui, sdkui-group, sdkui-enterprise |

## 完整分层关系

```
              app
               ↓
        ┌──────┴──────┐
        ↓             ↓
       sdk    sdkui + sdkui-group + sdkui-enterprise
        ↓             ↓
sdk-tcp,sdk-http,sdk-db → sdk-api ← sdkui
                            ↓
                          uikit
```

## 命名规则

具体模块名由各框架约束文档定义（如 Flutter 使用下划线命名）。

## 模块间解耦

### 页面跳转

各模块通过路由框架提供的路径字符串跳转，不直接引用目标页面类：

- sdkui 跳转到 sdkui-group 页面：使用路径 `/group/{id}/settings`
- 不产生模块间代码依赖
- 路由配置统一在 app 层

### 数据模型共享

共享模型定义在 sdk-api 模块，各模块通过接口依赖：

- 所有数据模型定义在 sdk-api
- sdkui 和 sdkui-group 都依赖 sdk-api
- 通过接口类型传递数据，不直接依赖实现

### 禁止的依赖关系

- sdkui 不得依赖 sdkui-group、sdkui-enterprise
- sdkui-group 不得依赖 sdkui-enterprise
- sdk 实现模块（tcp/http/db）之间不得相互依赖
