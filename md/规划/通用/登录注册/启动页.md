# 启动页

## 功能描述

App 启动后的首个页面，负责判断登录状态、执行自动登录，并跳转到对应页面。

---

## UI 布局

- Logo/品牌展示
- 加载指示器（可选）

---

## Model 层

### 依赖 SDK

- `IAuthService.hasLoginToken` - 判断是否可自动登录
- `IAuthService.autoLogin()` - 执行自动登录

---

## ViewModel 层

### 接口定义

```dart
abstract class ISplashViewModel {
  // 状态
  bool get isLoading;
  String? get errorMessage;
  
  // 操作
  Future<SplashResult> checkAndLogin();
}

enum SplashResult {
  goToLogin,     // 无 loginToken，跳转登录页
  goToSync,      // 自动登录成功，跳转数据同步页
  tokenExpired,  // loginToken 过期，跳转登录页
  error,         // 网络错误等，显示重试
}
```

### 行为逻辑

**checkAndLogin()：**
1. 检查 `authService.hasLoginToken`
2. 无 Token → 返回 `goToLogin`
3. 有 Token → 调用 `authService.autoLogin()`
4. 成功 → 返回 `goToSync`
5. 失败（loginTokenExpired） → 返回 `tokenExpired`
6. 失败（网络错误） → 返回 `error`

---

## View 层

### 职责

- 展示启动画面
- 调用 ViewModel 检查状态
- 根据结果跳转

### 跳转逻辑

| 结果 | 跳转 |
|------|------|
| `goToLogin` | 登录页 |
| `goToSync` | 数据同步页 |
| `tokenExpired` | 登录页（提示重新登录） |
| `error` | 显示错误，提供重试按钮 |
