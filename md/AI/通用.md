1. 写一个通用的 mvvm 约束文档到.github/instructions， 无关具体的编程语言， 用于限制 AI 生成代码约束 view/vm/model 每一层的职责，

1. 规划一下本项目的结构，生成一些空目录和空文件，包括.gitignore,
1. 本项目需要研究 mvvm 约束提示词并测试不同 ui 框架下通过提示词生成的代码做检查和单元测试，
1. 预计本项目需要支持 flutter/arkts/vue3 三种 ui 框架，
1. .github/instructions 存放通用的约束，md/AI 存放开发者写给 AI 的对话内容，AI 禁止编辑该目录，md/规划存放项目各级功能/页面的说明，包含通用的针对业务的说明，另外包含各种 ui 框架特殊的说明，
1. 以一个简单的 IM 项目为例，按需要的所有基本功能页面组织本项目结构，计划各个目录存放什么内容，包括三个 ui 对应项目位置，添加一个文件.github/instructions 介绍本项目各目录的说明，

1. 规划目录可能要更具体比如聊天页面包含的功能， 消息气泡的实现， 不同消息类型分别实现，
1. 不用直接回复我， 你先生成一个项目结构说明文档我看看再改，

1. projects 内暂时只规定项目文件夹名，内部细节先不要，

1. tests也是具体项目内的结构， 不定义在外面，

1. AI 编辑规则是不是有点多余了， 实际上只有md/AI不允许AI编辑，

1. 再讨论一下.github/instructions/mvvm.instructions.md通用mvvm约束，
1. 是否有必要给每一个vm/model添加接口定义以便AI参考？

1. 强制吧，也方便单元测试不是吗，

1. ViewModel 实现类名建议了两种， 用法有区别吗，

1. .github/instructions/flutter.instructions.md:13不是说了禁止或者可选这种暧昧的文字， 约束文档必须严格，直接给出最优的建议，你给我检查所有文档，

1. .github/instructions/project.instructions.md:35 语言各自的约束别写在这里了，改到md/规划里面每种各一个目录，包含该语言框架下的各方面约束， 比如技术栈上每一个库的用法，sdk初始化和传递，各方面多定义几个文档，先处理掉flutter文档，

1. md/规划/flutter还要一个文档代表入口，告诉AI什么情况看什么文档，.github/instructions/project.instructions.md:111这里只需要说明入口文档，

1. md/规划/通用添加关于规划目录自身的约束，先添加关于具体ui框架目录md/规划/flutter这种目录的约束， 约束好包含什么文件各自负责介绍什么， 

1. .github/instructions/ai-core.instructions.md 添加关于规划实现冲突或者代码无效时不要死磕，多根据.github/instructions/feedback.instructions.md反馈现状，包括用户的指令和规划限制冲突，不要无脑照办，

1. 我想进一步完善.github/instructions/mvvm.instructions.md，必须考虑所有边界约束， 你想想有哪些情况需要补充的， 目标是提到任意一个功能实现，套用这个mvvm约束就只有唯一正确的一个解，不能有什么是可以放在view也可以放在vm的，

1. 关于异常try catch log也得约束，主要避免同样的错误被层层捕获打印多余的日志， 也避免有错误没有捕获导致崩溃，

1. 按目前设计， 是不是大部分情况都不需要一个直接的Model类，而是vm自行决定使用各种model层的工具类和repo/service之类？

1. 对于ui无关的sdk，所有内容是否都属于model层？不需要额外的model类包裹， 直接在vm中使用？

1. 如果是更简单的中断， 比如删除什么时的二次确认， mvvm怎么分层，

1. 不要针对性的写二次确认和登录这些具体的情况， 抽象出更通用的说明方式， 合理安排这三种情况， 最简单的， 需要业务判断的， 更复杂的，

1. 感觉不错， 但是.github/instructions/mvvm.instructions.md:160 pendingAction使用后是否需要置空？一般是在哪一层负责这个，

1. 通过mcp询问，

1. .github\instructions\mvvm.instructions.md考虑关于一个页面需要两种大不相同的vm的情况，怎么设计更好，
1. 比如聊天页，分单聊群聊，ui大抵相同，但vm/model差异太大， 抽象个基类如何？对于view层如何处理仅其中一种情况显示的数据，

1. 大致可以， 对于两个不同的vm是否应该分别定义各自的接口？
1. 关键是view层如果使用到仅一方拥有的数据怎么处理？不只是type，比如仅群聊显示公告， 是否显示可以通过判断type完成， 但公告的ui部分似乎不可避免的引用单聊中没有的公告数据，这部分怎么处理比较好，

1. 看起来不错，先按这种设计更新到文档里， 注意描述要通用，然后给我对比如果要定义不同接口会是怎样的效果，

1. 说了要通用， 禁止在通用文档里编写flutter代码，

1. 我的意思是尽量使用文字描述而不是代码， 更不能用这么丑的伪代码，这还不如真代码，

## 多vm
1. 对比考虑如果view层持有通用接口再加getter获取独立接口， 会不会好一些，

1. 你这循环依赖了，严格禁止，
1. 我说的是view层添加getter，封装强制转换，使用上就好像有多个vm，在仅一方可用的ui部分就直接使用该子接口，

1. 我就是希望你来判断一下这种方案是否更好，

1. 那就按当前方案， 更新md\规划\flutter\复杂页面组织.md，

1. 别参见啊， 这里就是通用文档针对flutter的拓展，要具体代码，

1. 感觉差点意思， 虽然vm差异大，但还是有很多相同之处的， 当前方案没有统一的基类，相同之处怎么办？你想想可能有哪些相同，会话详情/消息列表/消息收发，

1. 好，先更新md\规划\flutter\复杂页面组织.md然后抽象出通用描述更新到md\规划\通用\复杂页面组织.md

1. md\规划\flutter\复杂页面组织.md代码太多了， 精简， 不要具体业务逻辑，尽量抽象，不要太多例子， 能说明白就行，
